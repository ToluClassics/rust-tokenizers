matrix:
  include:
    - language: rust
      rust: stable
      os:
        - linux
        - windows
        - osx
      script:
        - cargo build --manifest-path ./main/Cargo.toml --verbose
        - cargo test --manifest-path ./main/Cargo.toml

    - language: rust
      rust: beta
      os:
        - windows
      script:
        - cargo build --manifest-path ./main/Cargo.toml --verbose
        - cargo test --manifest-path ./main/Cargo.toml

    - language: rust
      rust: nightly
      os:
        - linux
        - windows
        - osx
      script:
        - cargo build --manifest-path ./python-bindings/Cargo.toml --verbose

    - language: python
      os: linux
      python: 3.7
      before_script:
        - cd python-bindings
        - bash install_rush.sh
      script:
        - python setup.py install